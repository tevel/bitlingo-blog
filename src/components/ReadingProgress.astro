---
/**
 * Reading Progress Bar Component
 * Shows scroll progress at the top of the page
 */
---

<div class="reading-progress-container">
  <div class="reading-progress-bar" id="reading-progress"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const progressBar = document.getElementById('reading-progress');
    if (!progressBar) return;

    const updateProgress = () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
      progressBar.style.width = `${Math.min(100, Math.max(0, progress))}%`;
    };

    // Initial update
    updateProgress();

    // Update on scroll with throttling for performance
    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          updateProgress();
          ticking = false;
        });
        ticking = true;
      }
    });
  });
</script>

<style>
  .reading-progress-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: rgba(255, 255, 255, 0.1);
    z-index: 9999;
  }

  .reading-progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #f5a623, #ffb940);
    box-shadow: 0 0 10px rgba(245, 166, 35, 0.5);
    transition: width 0.1s ease-out;
  }
</style>
